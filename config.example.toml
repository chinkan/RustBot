# RustFox Configuration

[telegram]
# Get your bot token from @BotFather on Telegram
bot_token = "YOUR_TELEGRAM_BOT_TOKEN"
# Only these Telegram user IDs can interact with the bot
# Find your user ID by messaging @userinfobot on Telegram
allowed_user_ids = [123456789]

[llm]
# LLM provider: "openrouter" | "ollama" | "openai"
provider = "openrouter"
# Model name (see provider docs for available models)
model = "moonshotai/kimi-k2.5"
# API key — required for OpenRouter and OpenAI; leave blank for Ollama
api_key = "YOUR_OPENROUTER_API_KEY"
# Base URL — defaults to the canonical endpoint for the chosen provider:
#   openrouter -> https://openrouter.ai/api/v1
#   ollama     -> http://localhost:11434/v1
#   openai     -> https://api.openai.com/v1
# Uncomment and override only if you need a custom endpoint.
# base_url = "https://openrouter.ai/api/v1"
# Maximum tokens in response
max_tokens = 4096
# System prompt for the AI assistant
system_prompt = """You are a helpful AI assistant with access to tools. \
Use the available tools to help the user with their tasks. \
When using file or terminal tools, operate only within the allowed sandbox directory. \
Be concise and helpful."""

# --- Ollama example (uncomment and adjust to use a local Ollama server) ---
# [llm]
# provider = "ollama"
# model = "llama3.2"
# base_url = "http://localhost:11434/v1"
# api_key = ""
# max_tokens = 4096

# --- OpenAI example (uncomment and adjust to use OpenAI directly) ---
# [llm]
# provider = "openai"
# model = "gpt-4o"
# api_key = "YOUR_OPENAI_API_KEY"
# max_tokens = 4096

[sandbox]
# The directory where file operations and command execution are allowed
# The bot cannot access files outside this directory
allowed_directory = "/tmp/rustfox-sandbox"

[memory]
# Path to the SQLite database file for persistent memory
# Stores conversations, knowledge base, and vector embeddings
database_path = "rustfox.db"

[skills]
# Directory containing skill markdown files
# Skills are natural-language instructions loaded at startup
directory = "skills"

[general]
# Your location, injected into the system prompt so the AI knows your timezone/region
# Uncomment and set to your city/region (e.g. "Tokyo, Japan")
# location = "Tokyo, Japan"

# Agent loop (optional; defaults apply if section omitted)
# [agent]
# max_iterations = 25   # Agent loop cap (default 25)

# Embedding API for vector search (optional)
# When configured, enables hybrid vector + FTS5 search for memory.
# Without this, falls back to FTS5 keyword search only.
# Works with any OpenAI-compatible /v1/embeddings endpoint.
# [embedding]
# api_key = "YOUR_OPENROUTER_API_KEY"
# base_url = "https://openrouter.ai/api/v1"
# model = "qwen/qwen3-embedding-8b"
# dimensions = 1536

# MCP Server Configurations
# Each [[mcp_servers]] block defines an MCP server to connect to
# The bot will discover and register tools from each server

# Example: Git MCP server (requires uvx/npx)
# [[mcp_servers]]
# name = "git"
# command = "uvx"
# args = ["mcp-server-git"]

# Example: Filesystem MCP server
# [[mcp_servers]]
# name = "filesystem"
# command = "npx"
# args = ["-y", "@modelcontextprotocol/server-filesystem", "/tmp/rustfox-sandbox"]

# Example: Google Workspace MCP server (Gmail, Calendar, Drive, Docs, Sheets, Slides)
# Note: use --from because the package name differs from the executable name
#
# OAuth setup:
#   1. https://console.cloud.google.com/apis/credentials
#      → Create/select project → enable Drive, Gmail, Calendar, Docs, Sheets, Slides APIs
#   2. OAuth consent screen → External → add your email as a test user
#   3. Credentials → Create OAuth Client ID → Web application
#      → add Authorised redirect URI: https://developers.google.com/oauthplayground
#      → save your Client ID and Client Secret
#   4. Open https://developers.google.com/oauthplayground
#      → gear icon → check "Use your own OAuth credentials" → enter Client ID + Secret
#      → add scopes: https://www.googleapis.com/auth/drive
#                    https://www.googleapis.com/auth/gmail.modify
#                    https://www.googleapis.com/auth/calendar
#                    https://www.googleapis.com/auth/documents
#                    https://www.googleapis.com/auth/spreadsheets
#                    https://www.googleapis.com/auth/presentations
#      → "Authorize APIs" → sign in → "Exchange authorization code for tokens"
#      → copy the Refresh token value
#
# [[mcp_servers]]
# name = "google-workspace"
# command = "uvx"
# args = ["--from", "google-workspace-mcp", "google-workspace-worker"]
# [mcp_servers.env]
# GOOGLE_WORKSPACE_CLIENT_ID     = "your-client-id.apps.googleusercontent.com"
# GOOGLE_WORKSPACE_CLIENT_SECRET = "your-client-secret"
# GOOGLE_WORKSPACE_REFRESH_TOKEN = "your-refresh-token"  # from step 4 above
# GOOGLE_WORKSPACE_ENABLED_CAPABILITIES = '["drive","docs","gmail","calendar","sheets","slides"]'

# Example: Web search MCP server with environment variables
# [[mcp_servers]]
# name = "brave-search"
# command = "npx"
# args = ["-y", "@brave/brave-search-mcp-server"]
# [mcp_servers.env]
# BRAVE_API_KEY = "your-brave-api-key"
